<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecteur QR Code</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }

        #qrcode-reader {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Lecteur QR Code</h1>
    <button onclick="activerCamera()">Scann</button>
    <input type="text" id="resultat" placeholder="Résultat du QR Code">
    <video id="qrcode-reader"></video>

    <script src="https://cdn.jsdelivr.net/npm/instascan@2.0.1/dist/instascan.min.js"></script>
    <script>
        const scanner = new Instascan.Scanner({ video: document.getElementById('qrcode-reader') });

        scanner.addListener('scan', function (content) {
            document.getElementById('resultat').value = content;
            // Vous pouvez ajouter d'autres actions après avoir lu le QR code si nécessaire
            // Par exemple, arrêter la caméra après la lecture
            scanner.stop();
            document.getElementById('qrcode-reader').style.display = 'none';
        });

        function activerCamera() {
            document.getElementById('qrcode-reader').style.display = 'block';
            Instascan.Camera.getCameras().then(function (cameras) {
                if (cameras.length > 0) {
                    scanner.start(cameras[0]);
                } else {
                    console.error('Aucune caméra trouvée.');
                }
            }).catch(function (e) {
                console.error(e);
            });
        }
    </script>
</body>
</html>
